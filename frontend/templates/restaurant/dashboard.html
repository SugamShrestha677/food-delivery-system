{% extends "sidebar.html" %}
{% load static %}
{% block content %}
        <!-- Main Content -->
        <div class="flex-1 flex flex-col min-w-0">
            <!-- Header -->
            <header class="bg-white border-b border-brand-light-gray px-4 md:px-8 py-4">
                <div class="flex items-center justify-between">
                    <div class="flex items-center gap-4">
                        <button id="mobileMenuBtn" class="md:hidden p-2 text-brand-gray hover:bg-brand-light-gray rounded-lg">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                            </svg>
                        </button>
                        <h1 class="text-xl md:text-2xl font-bold text-black">Dashboard</h1>
                    </div>
                    <div class="flex items-center gap-4">
                        <div class="relative">
                            <button class="p-2 text-brand-gray hover:bg-brand-light-gray rounded-lg">
                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-5 5v-5zM9 7H4l5-5v5zM15 7h5l-5-5v5zM9 17H4l5 5v-5z"></path>
                                </svg>
                            </button>
                            <div class="absolute -top-1 -right-1 w-5 h-5 bg-brand-orange rounded-full flex items-center justify-center notification-badge">
                                <span class="text-xs text-white font-medium">3</span>
                            </div>
                        </div>
                        <div class="w-8 h-8 bg-brand-light-gray rounded-full flex items-center justify-center">
                            <svg class="w-4 h-4 text-brand-gray" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                            </svg>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Content -->
            <main class="flex-1 p-4 md:p-8 overflow-auto">
                <!-- Stats Cards -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6 mb-6">
                    <div class="bg-white border border-brand-light-gray rounded-lg p-6 stats-card">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-sm text-brand-gray">Total Orders Today</span>
                            <button class="refresh-btn p-1 text-brand-gray hover:text-brand-orange transition-colors">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                                </svg>
                            </button>
                        </div>
                        <div class="text-3xl font-bold text-black mb-1" id="totalOrders">34</div>
                        <div class="text-sm text-brand-green">+4 from yesterday</div>
                    </div>

                    <div class="bg-white border border-brand-light-gray rounded-lg p-6 stats-card">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-sm text-brand-gray">Revenue Today</span>
                            <span class="text-brand-gray">$</span>
                        </div>
                        <div class="text-3xl font-bold text-black mb-1" id="revenue">$1014.00</div>
                        <div class="text-sm text-brand-green">+8% from yesterday</div>
                    </div>

                    <div class="bg-white border border-brand-light-gray rounded-lg p-6 stats-card">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-sm text-brand-gray">Avg. Delivery Time</span>
                            <div class="w-4 h-4 rounded-full border-2 border-brand-gray flex items-center justify-center">
                                <div class="w-1 h-1 bg-brand-gray rounded-full"></div>
                            </div>
                        </div>
                        <div class="text-3xl font-bold text-black" id="deliveryTime">25min</div>
                    </div>
                </div>

                <!-- Alert Banner -->
                <div class="bg-brand-light-yellow border border-brand-yellow rounded-lg p-4 mb-6 flex items-center gap-3">
                    <svg class="w-5 h-5 text-brand-yellow flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"></path>
                    </svg>
                    <div class="flex-1">
                        <span class="font-medium text-black">Low Stock Alert:</span>
                        <span class="text-black ml-2">3 items need restocking.</span>
                    </div>
                    <button class="text-brand-yellow hover:text-brand-yellow/80 font-medium underline">
                        Update inventory
                    </button>
                </div>

                <div class="grid grid-cols-1 xl:grid-cols-3 gap-6">
                    <!-- Today's Active Orders -->
                    <div class="xl:col-span-2 bg-white border border-brand-light-gray rounded-lg">
                        <div class="p-6 border-b border-brand-light-gray">
                            <div class="flex items-center justify-between">
                                <div>
                                    <h2 class="text-xl font-bold text-black">Today's Active Orders</h2>
                                    <p class="text-sm text-brand-gray mt-1">Manage incoming orders and track preparation status</p>
                                </div>
                                <button class="refresh-btn p-2 text-brand-gray hover:bg-brand-light-gray rounded-lg transition-colors">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                                    </svg>
                                </button>
                            </div>
                        </div>
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead>
                                    <tr class="border-b border-brand-light-gray">
                                        <th class="text-left p-4 text-sm font-medium text-brand-gray">Order ID</th>
                                        <th class="text-left p-4 text-sm font-medium text-brand-gray">Customer</th>
                                        <th class="text-left p-4 text-sm font-medium text-brand-gray">Items</th>
                                        <th class="text-left p-4 text-sm font-medium text-brand-gray">Status</th>
                                        <th class="text-left p-4 text-sm font-medium text-brand-gray">Time</th>
                                        <th class="text-left p-4 text-sm font-medium text-brand-gray">Total</th>
                                        <th class="text-left p-4 text-sm font-medium text-brand-gray">Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="ordersTableBody">
                                    <tr class="border-b border-brand-light-gray order-row">
                                        <td class="p-4 text-sm text-black font-medium">ORD-274</td>
                                        <td class="p-4 text-sm text-black">Emma Willison</td>
                                        <td class="p-4 text-sm text-brand-gray">Caesar Salad, Fries</td>
                                        <td class="p-4">
                                            <span class="px-2 py-1 bg-brand-light-yellow text-brand-brown text-xs rounded-full">Pending</span>
                                        </td>
                                        <td class="p-4 text-sm text-brand-gray">12:03 PM</td>
                                        <td class="p-4 text-sm text-black font-medium">$46.00</td>
                                        <td class="p-4">
                                            <button class="accept-btn px-3 py-1 bg-brand-green hover:bg-brand-green/90 text-white text-sm rounded transition-colors">
                                                Accept
                                            </button>
                                        </td>
                                    </tr>
                                    <tr class="border-b border-brand-light-gray order-row">
                                        <td class="p-4 text-sm text-black font-medium">ORD-279</td>
                                        <td class="p-4 text-sm text-black">David Brown</td>
                                        <td class="p-4 text-sm text-brand-gray">Salad, Garlic Bread</td>
                                        <td class="p-4">
                                            <span class="px-2 py-1 bg-brand-light-yellow text-brand-brown text-xs rounded-full">Pending</span>
                                        </td>
                                        <td class="p-4 text-sm text-brand-gray">01:03 PM</td>
                                        <td class="p-4 text-sm text-black font-medium">$40.00</td>
                                        <td class="p-4">
                                            <button class="accept-btn px-3 py-1 bg-brand-green hover:bg-brand-green/90 text-white text-sm rounded transition-colors">
                                                Accept
                                            </button>
                                        </td>
                                    </tr>
                                    <tr class="order-row">
                                        <td class="p-4 text-sm text-black font-medium">ORD-280</td>
                                        <td class="p-4 text-sm text-black">John Brown</td>
                                        <td class="p-4 text-sm text-brand-gray">Fish & Chips, Fries</td>
                                        <td class="p-4">
                                            <span class="px-2 py-1 bg-brand-light-yellow text-brand-brown text-xs rounded-full">Pending</span>
                                        </td>
                                        <td class="p-4 text-sm text-brand-gray">02:03 PM</td>
                                        <td class="p-4 text-sm text-black font-medium">$90.00</td>
                                        <td class="p-4">
                                            <button class="accept-btn px-3 py-1 bg-brand-green hover:bg-brand-green/90 text-white text-sm rounded transition-colors">
                                                Accept
                                            </button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Low Stock Items -->
                    <div class="bg-white border border-brand-light-gray rounded-lg">
                        <div class="p-6 border-b border-brand-light-gray">
                            <div class="flex items-center justify-between">
                                <h2 class="text-xl font-bold text-black">Low Stock Items</h2>
                                <button class="p-2 text-brand-gray hover:bg-brand-light-gray rounded-lg transition-colors">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                                    </svg>
                                </button>
                            </div>
                            <p class="text-sm text-brand-gray">Items that need restocking</p>
                        </div>
                        <div class="p-6 space-y-4">
                            <div class="flex items-center justify-between">
                                <div>
                                    <div class="font-medium text-black">Mozzarella Cheese</div>
                                    <div class="text-sm text-brand-gray">2 left</div>
                                </div>
                                <span class="px-2 py-1 border border-brand-yellow text-brand-yellow text-xs rounded-full">low</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <div>
                                    <div class="font-medium text-black">Tomato Sauce</div>
                                    <div class="text-sm text-brand-gray">5 bottles left</div>
                                </div>
                                <span class="px-2 py-1 border border-brand-yellow text-brand-yellow text-xs rounded-full">low</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <div>
                                    <div class="font-medium text-black">Fresh Basil</div>
                                    <div class="text-sm text-brand-gray">1 pack left</div>
                                </div>
                                <span class="px-2 py-1 border border-brand-yellow text-brand-yellow text-xs rounded-full">low</span>
                            </div>
                            <button class="w-full mt-4 px-4 py-2 bg-white border border-brand-gray text-brand-gray hover:bg-brand-light-gray rounded transition-colors">
                                Manage Inventory
                            </button>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <script>
        // Mobile menu functionality
        const mobileMenuBtn = document.getElementById('mobileMenuBtn');
        const sidebar = document.getElementById('sidebar');
        const mobileOverlay = document.getElementById('mobileOverlay');

        function toggleMobileMenu() {
            sidebar.classList.toggle('sidebar-hidden');
            mobileOverlay.classList.toggle('hidden');
        }

        mobileMenuBtn.addEventListener('click', toggleMobileMenu);
        mobileOverlay.addEventListener('click', toggleMobileMenu);

        // Navigation functionality
        const navItems = document.querySelectorAll('.nav-item');
        navItems.forEach(item => {
            item.addEventListener('click', function() {
                navItems.forEach(nav => {
                    nav.classList.remove('active', 'bg-brand-orange', 'text-white');
                    nav.classList.add('text-brand-gray', 'hover:bg-brand-light-gray');
                });
                this.classList.add('active', 'bg-brand-orange', 'text-white');
                this.classList.remove('text-brand-gray', 'hover:bg-brand-light-gray');
            });
        });

        // Refresh functionality
        const refreshBtns = document.querySelectorAll('.refresh-btn');
        refreshBtns.forEach(btn => {
            btn.addEventListener('click', function() {
                this.style.transform = 'rotate(360deg)';
                this.style.transition = 'transform 0.5s ease-in-out';
                
                setTimeout(() => {
                    this.style.transform = 'rotate(0deg)';
                }, 500);

                // Simulate data refresh
                if (this.closest('.stats-card')) {
                    setTimeout(() => {
                        updateStats();
                    }, 500);
                }
            });
        });

        // Accept order functionality
        const acceptBtns = document.querySelectorAll('.accept-btn');
        acceptBtns.forEach(btn => {
            btn.addEventListener('click', function() {
                const row = this.closest('tr');
                const statusCell = row.querySelector('td:nth-child(4) span');
                
                // Update status
                statusCell.textContent = 'Accepted';
                statusCell.className = 'px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full';
                
                // Update button
                this.textContent = 'Preparing';
                this.className = 'px-3 py-1 bg-blue-500 hover:bg-blue-600 text-white text-sm rounded transition-colors';
                
                // Add success animation
                row.style.backgroundColor = '#f0fdf4';
                setTimeout(() => {
                    row.style.backgroundColor = '';
                }, 1000);

                // Update total orders count
                const totalOrdersElement = document.getElementById('totalOrders');
                let currentCount = parseInt(totalOrdersElement.textContent);
                totalOrdersElement.textContent = currentCount + 1;
            });
        });

        // Update stats function
        function updateStats() {
            const totalOrders = document.getElementById('totalOrders');
            const revenue = document.getElementById('revenue');
            const deliveryTime = document.getElementById('deliveryTime');

            // Simulate random updates
            const newOrders = Math.floor(Math.random() * 10) + 30;
            const newRevenue = (Math.random() * 500 + 800).toFixed(2);
            const newDeliveryTime = Math.floor(Math.random() * 10) + 20;

            totalOrders.textContent = newOrders;
            revenue.textContent = `$${newRevenue}`;
            deliveryTime.textContent = `${newDeliveryTime}min`;
        }

        // Auto-refresh stats every 30 seconds
        setInterval(updateStats, 30000);

        // Add new order simulation
        function addNewOrder() {
            const ordersTableBody = document.getElementById('ordersTableBody');
            const orderIds = ['ORD-281', 'ORD-282', 'ORD-283', 'ORD-284'];
            const customers = ['Sarah Johnson', 'Mike Wilson', 'Lisa Chen', 'Tom Anderson'];
            const items = ['Margherita Pizza', 'Pasta Carbonara', 'Chicken Parmesan', 'Tiramisu'];
            const times = ['03:15 PM', '03:20 PM', '03:25 PM', '03:30 PM'];
            const totals = ['$32.00', '$28.50', '$45.00', '$18.00'];

            const randomIndex = Math.floor(Math.random() * orderIds.length);
            
            const newRow = document.createElement('tr');
            newRow.className = 'border-b border-brand-light-gray order-row';
            newRow.innerHTML = `
                <td class="p-4 text-sm text-black font-medium">${orderIds[randomIndex]}</td>
                <td class="p-4 text-sm text-black">${customers[randomIndex]}</td>
                <td class="p-4 text-sm text-brand-gray">${items[randomIndex]}</td>
                <td class="p-4">
                    <span class="px-2 py-1 bg-brand-light-yellow text-brand-brown text-xs rounded-full">Pending</span>
                </td>
                <td class="p-4 text-sm text-brand-gray">${times[randomIndex]}</td>
                <td class="p-4 text-sm text-black font-medium">${totals[randomIndex]}</td>
                <td class="p-4">
                    <button class="accept-btn px-3 py-1 bg-brand-green hover:bg-brand-green/90 text-white text-sm rounded transition-colors">
                        Accept
                    </button>
                </td>
            `;

            // Add event listener to new accept button
            const newAcceptBtn = newRow.querySelector('.accept-btn');
            newAcceptBtn.addEventListener('click', function() {
                const row = this.closest('tr');
                const statusCell = row.querySelector('td:nth-child(4) span');
                
                statusCell.textContent = 'Accepted';
                statusCell.className = 'px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full';
                
                this.textContent = 'Preparing';
                this.className = 'px-3 py-1 bg-blue-500 hover:bg-blue-600 text-white text-sm rounded transition-colors';
                
                row.style.backgroundColor = '#f0fdf4';
                setTimeout(() => {
                    row.style.backgroundColor = '';
                }, 1000);
            });

            ordersTableBody.appendChild(newRow);
            
            // Highlight new order
            newRow.style.backgroundColor = '#fef3c7';
            setTimeout(() => {
                newRow.style.backgroundColor = '';
            }, 2000);
        }

        // Add new order every 45 seconds
        setInterval(addNewOrder, 45000);

        // Responsive table scroll
        window.addEventListener('resize', function() {
            if (window.innerWidth < 768) {
                sidebar.classList.add('sidebar-hidden');
                mobileOverlay.classList.add('hidden');
            }
        });

        // Initialize tooltips and animations
        document.addEventListener('DOMContentLoaded', function() {
            // Add smooth scrolling
            document.documentElement.style.scrollBehavior = 'smooth';
            
            // Initialize notification animation
            const notificationBadge = document.querySelector('.notification-badge');
            if (notificationBadge) {
                setInterval(() => {
                    notificationBadge.style.transform = 'scale(1.1)';
                    setTimeout(() => {
                        notificationBadge.style.transform = 'scale(1)';
                    }, 200);
                }, 3000);
            }
        });
    </script>

{% endblock %}
